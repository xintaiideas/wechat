

<div class="table-responsive">
	    <div id="toolbar_usermsg" class="btn-group">
		    <!-- <button type="button" class="btn btn-default">
		        <i class="glyphicon glyphicon-plus"></i>
		    </button> -->
		<div class="dropdown">
		    <button type="button" class="btn dropdown-toggle btn-info" id="dropdownMenu1" data-toggle="dropdown">信息类型
		        <span class="caret"></span>
		    </button>
		    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
		        <li role="presentation">
		            <a role="menuitem" tabindex="-1" href="javascript:void(0);" onclick="queryVotePage()">投票</a>
		        </li>
		        <li role="presentation">
		            <a role="menuitem" tabindex="-1" href="javascript:void(0);" onclick="queryOrderPage()">点播</a>
		        </li>
		        <li role="presentation">
		            <a role="menuitem" tabindex="-1" href="javascript:void(0);" onclick="queryLeaveMsgPage()">留言</a>
		        </li>
		    </ul>
		</div>
    </div>
	<table id="table_usermsg" data-toggle="table"
	       data-url="/wiesel-wechat/core/queryOrderPage"  
	       data-classes="table table-hover table-condensed"
	       data-sort-name="nickname,sex"
	       data-sort-order="desc" 
	       data-click-to-select="true"
	       data-search="true"
	       data-show-refresh="true"
	       data-show-toggle="true"
	       data-show-columns="true" 
	       data-toolbar="#toolbar_usermsg"
	       data-pagination="true"
	       data-height="500"
	       >
	    <thead>
	    <tr>
	        <th  data-checkbox="true" >Index</th>
	        <th data-field="title" data-sortable="true"  data-align="center">标题</th>
	        <th data-field="content" data-sortable="true"   data-align="center">内容</th>
			<th data-field="createTime" data-sortable="true" data-align="center">创建时间</th>
			<th data-field="status" data-sortable="true" data-formatter="statausFormatter" data-align="center">处理情况</th>
			<th data-field="action" data-formatter="actionFormatter" data-align="center" data-events="actionEvents">操作</th>
		</tr>
	    </thead>
	</table>
  </div>	
  

<script type="text/javascript">
$('#table_usermsg').bootstrapTable({
    url: '/wiesel-wechat/core/queryOrderPage'
}); 

function queryVotePage(){
		$.ajax({
		type:"POST",
		url:'/wiesel-wechat/core/queryVoteMsgPage',
		data:'',
		dataType:"json",
	    success:function(data){
				$('#table_usermsg').bootstrapTable('load', data);
			
		} 
	});
	 
};

function queryOrderPage(){
	$.ajax({
		type:"POST",
		url:'/wiesel-wechat/core/queryOrderPage',
		data:'',
		dataType:"json",
	    success:function(data){
				$('#table_usermsg').bootstrapTable('load', data);
		} 
	});
};

function queryLeaveMsgPage(){
	$.ajax({
		type:"POST",
		url:'/wiesel-wechat/core/queryLeaveMsgPage',
		data:'',
		dataType:"json",
	    success:function(data){
				$('#table_usermsg').bootstrapTable('load', data);
			
		} 
	});
};

function statausFormatter(value) {

		console.log("in")
		if(value==1){
	    	return "未处理";
	    }else if(value==2){
	    	return "处理";
	    }else{
	    	
	    	return "";
	    }
};
function runningFormatter(value, row, index) {
    return index+1;
};

function actionFormatter(value, row, index) {
    return [
        '<a class="like" href="javascript:void(0)" title="Like">',
        '<i class="glyphicon glyphicon-heart"></i>',
        '</a>',
        '<a class="edit ml10" href="javascript:void(0)" title="Edit">',
        '<i class="glyphicon glyphicon-edit"></i>',
        '</a>',
        '<a class="remove ml10" href="javascript:void(0)" title="Remove">',
        '<i class="glyphicon glyphicon-remove"></i>',
        '</a>'
    ].join('');
};

window.actionEvents = {
    'click .like': function (e, value, row, index) {
        alert('You click like icon, row: ' + JSON.stringify(row));
        console.log(value, row, index);
    },
    'click .edit': function (e, value, row, index) {
        alert('You click edit icon, row: ' + JSON.stringify(row));
        console.log(value, row, index);
    },
    'click .remove': function (e, value, row, index) {
        alert('You click remove icon, row: ' + JSON.stringify(row));
        console.log(value, row, index);
    }
};

$(function(){
//	 window.
//	 var $result = $('#eventsResult');
//
//	    $('#eventsTable').on('all.bs.table', function (e, name, args) {
//	        console.log('Event:', name, ', data:', args);
//	    })
//	    .on('click-row.bs.table', function (e, row, $element) {
//	        $result.text('Event: click-row.bs.table');
//	    })
//	    .on('dbl-click-row.bs.table', function (e, row, $element) {
//	        $result.text('Event: dbl-click-row.bs.table');
//	    })
//	    .on('sort.bs.table', function (e, name, order) {
//	        $result.text('Event: sort.bs.table');
//	    })
//	    .on('check.bs.table', function (e, row) {
//	        $result.text('Event: check.bs.table');
//	    })
//	    .on('uncheck.bs.table', function (e, row) {
//	        $result.text('Event: uncheck.bs.table');
//	    })
//	    .on('check-all.bs.table', function (e) {
//	        $result.text('Event: check-all.bs.table');
//	    })
//	    .on('uncheck-all.bs.table', function (e) {
//	        $result.text('Event: uncheck-all.bs.table');
//	    })
//	    .on('load-success.bs.table', function (e, data) {
//	        $result.text('Event: load-success.bs.table');
//	    })
//	    .on('load-error.bs.table', function (e, status) {
//	        $result.text('Event: load-error.bs.table');
//	    })
//	    .on('column-switch.bs.table', function (e, field, checked) {
//	        $result.text('Event: column-switch.bs.table');
//	    })
//	    .on('page-change.bs.table', function (e, number, size) {
//	        $result.text('Event: page-change.bs.table');
//	    })
//	    .on('search.bs.table', function (e, text) {
//	        $result.text('Event: search.bs.table');
//	    });
	
//	/$('#table').bootstrapTable('load', data);
});
</script>
